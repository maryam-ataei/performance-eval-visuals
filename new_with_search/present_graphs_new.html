<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TCP Parameter Change Results</title>
<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  background: #fafafa;
}
h1 {
  text-align: center;
  color: #222;
  font-size: 32px;
  margin-top: 60px;
  margin-bottom: 10px;
  text-transform: capitalize;
  letter-spacing: 1px;
}
h2, h3 {
  color: #333;
  margin-top: 40px;
  text-transform: none;
}
.figure-desc {
  max-width: 800px;
  font-size: 15px;
  line-height: 1.5em;
  color: #444;
}
.grid {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-bottom: 30px;
}
.card {
  border: 1px solid #ddd;
  padding: 10px;
  width: 30%;
  background: #fff;
  box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.card:hover {
  transform: translateY(-4px);
  box-shadow: 3px 3px 10px rgba(0,0,0,0.15);
}
.card img {
  width: 100%;
  height: auto;
  cursor: zoom-in;
  border-radius: 8px;
}
.card p {
  text-align: center;
  font-size: 14px;
  margin-top: 5px;
  color: #444;
}
table {
  border-collapse: collapse;
  margin: 0 auto 20px auto;
}
th, td {
  border: 1px solid #ccc;
  padding: 6px 10px;
  text-align: center;
}
th {
  background: #eee;
}
.changed {
  color: #b30000;
  font-weight: bold;
}

/* horizontal separators */
hr.section-line {
  border: none;
  border-top: 1px solid #ccc;
  margin: 30px 0;
}
hr.bold-line {
  border: none;
  border-top: 4px solid #000;
  margin: 50px 0;
}

/* network config box */
.config-box {
  text-align: center;
  margin: 30px auto 50px auto;
  padding: 15px 25px;
  border: 2px solid #333;
  border-radius: 10px;
  background: #fff;
  display: inline-block;
  box-shadow: 3px 3px 10px rgba(0,0,0,0.1);
  font-size: 16px;
  line-height: 1.6em;
}
.config-box strong {
  color: #222;
  font-size: 17px;
}

/* modal styling */
.modal {
  display:none;
  position:fixed;
  z-index:1000;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.85);
}
.modal-content {
  margin:auto;
  display:block;
  max-width:90%;
  max-height:90%;
}
.close {
  position:absolute;
  top:20px;
  right:40px;
  color:white;
  font-size:40px;
  cursor:pointer;
}
</style>
</head>
<body>

<h1>TCP Parameter Change Results</h1>

<div style="text-align:left; max-width:800px;">
  <ul style="font-size:16px;line-height:1.6em;color:#333;">
    <li>The network setup includes a Raspberry Pi acting as the router.</li>
    <li>The client machine is connected to the Pi.</li>
    <li>The following network parameters were used during the experiments:</li>
  </ul>

  <div class="config-box" style="margin-left:0;">
    <strong>Network Configuration</strong><br>
    Rate: 80&nbsp;Mb/s &nbsp;|&nbsp;
    Delay: 100&nbsp;ms &nbsp;|&nbsp;
    Queue: 5&nbsp;BDP
  </div>
</div>

<div class="config-box" style="max-width:800px;margin:10px auto 30px auto;font-size:16px;line-height:1.6em;color:#0a2a66;text-align:left;border-left:4px solid #0a2a66;padding-left:12px;">
  <strong>Goodput Estimation</strong><br>
  The goodput values are derived from <code>pcap</code> traces captured on the server side.
</div>



<p style="max-width:800px;margin:20px auto 30px auto;font-size:16px;line-height:1.6em;color:#333;">
  The following results correspond to <strong>FreeBSD default-NewReno with default TCP parameters</strong>. Hystart++ and SEARCH are disabled.
  These serve as the baseline for comparing parameter tuning effects.
</p>


<h1>FreeBSD_Default Parameters</h1>

<table>
<tr><th>Parameter</th><th>Default</th></tr>
<tr><td>abc_l_var</td><td>2</td></tr>
<tr><td>sendspace</td><td>32768</td></tr>
<tr><td>sendbuf_inc</td><td>8192</td></tr>
<tr><td>sendbuf_max</td><td>2097152</td></tr>
<tr><td>maxsockbuf</td><td>2097152</td></tr>
</table>

<h2>default_newreno_off (default_parameters)</h2>
<ul class="figure-desc">
  <li>This setup uses FreeBSD’s default TCP parameters and the default-NewReno congestion control.</li>
  <li>The cwnd growth is limited by the receiver window (<em>rwnd</em>), reaching stability around 6 MB.</li>
  <li>Throughput stabilizes near the link rate, with Goodput slightly lower due to TCP overhead.</li>
</ul>

<div class='grid'>
  <div class='card'><img class='zoom-img' src='freebsd/default_off_default_parameters/plots/log_data1_cwnd_rwind_cwndlimited_zoomed.png'><p>cwnd_rwind</p></div>
  <div class='card'><img class='zoom-img' src='freebsd/default_off_default_parameters/plots/log_data1_srtts_zoomed.png'><p>srtt</p></div>
  <div class='card'><img class='zoom-img' src='freebsd/default_off_default_parameters/plots/log_data1_throughput_goodput_zoomed.png'><p>throughput_goodput</p></div>
</div>

<h1>FreeBSD</h1>

<p style="max-width:800px;margin:20px auto 30px auto;font-size:16px;line-height:1.6em;color:#333;text-align:left;">
  In this section, we <strong>modified several TCP buffer and congestion control parameters</strong> 
  to analyze their impact on cwnd, throughput and RTT.
  Results are shown for both <strong>default-NewReno</strong> and <strong>RACK-NewReno</strong> implementations. Hystart++ and SEARCH are disabled.
</p>


<table>
<tr><th>Parameter</th><th>Default</th><th>Set Value</th></tr>
<tr><td>abc_l_var</td><td>2</td><td class='changed'>200</td></tr>
<tr><td>sendspace</td><td>32768</td><td class='changed'>1048576</td></tr>
<tr><td>sendbuf_inc</td><td>8192</td><td>8192</td></tr>
<tr><td>sendbuf_max</td><td>2097152</td><td class='changed'>134217728</td></tr>
<tr><td>maxsockbuf</td><td>2097152</td><td class='changed'>268435456</td></tr>
</table>

<h2>default_newreno_off</h2>
<ul class="figure-desc">
  <li>Here, buffer and congestion-related parameters such as <em>sendspace</em> and <em>maxsockbuf</em> are increased significantly.</li>
  <li>The larger abc_l_var and buffers allow a higher <em>cwnd</em>.</li>
  <li>The <em>cwnd</em> grows rapidly, but an abrupt collapse occurs due to a retransmission timeout triggered by excessive queue buildup.</li>
  <li>As a result, throughput drops sharply after the peak.</li>
</ul>
<div class='grid'>
  <div class='card'><img class='zoom-img' src='freebsd/default_newreno_off_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data1_cwnd_rwind_cwndlimited_zoomed.png'><p>cwnd_rwind</p></div>
  <div class='card'><img class='zoom-img' src='freebsd/default_newreno_off_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data1_srtts_zoomed.png'><p>srtt</p></div>
  <div class='card'><img class='zoom-img' src='freebsd/default_newreno_off_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data1_throughput_goodput_zoomed.png'><p>throughput_goodput</p></div>
</div>

<!-- <hr class="section-line"> -->

<!-- <h2>default_newreno_search</h2>
<div class='grid'>
  <div class='card'><img class='zoom-img' src='freebsd/default_newreno_search_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data5_cwnd_rwind_cwndlimited_zoomed.png'><p>cwnd_rwind</p></div>
  <div class='card'><img class='zoom-img' src='freebsd/default_newreno_search_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data5_srtts_zoomed.png'><p>srtt</p></div>
  <div class='card'><img class='zoom-img' src='freebsd/default_newreno_search_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data5_throughput_goodput_zoomed.png'><p>throughput_goodput</p></div>
</div> -->

<hr class="section-line">

<h2>rack_newreno_off</h2>
<ul class="figure-desc">
  <li>This experiment evaluates the <strong>RACK TCP</strong> implementation in FreeBSD using the same enlarged buffer parameters as before.</li>
  <li>The <em>cwnd</em> grows steadily without collapsing, showing that RACK’s time-based loss detection avoids retransmission timeouts.</li>
  <li>The effective RTT increases gradually due to queue buildup but then stabilizes, while throughput and Goodput reach high steady values with minimal oscillation, then throughput dip occurs.</li>
</ul>
<div class='grid'>
  <div class='card'><img class='zoom-img' src='freebsd/rack_newreno_off_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data3_cwnd_rwind_cwndlimited_zoomed.png'><p>cwnd_rwind</p></div>
  <div class='card'><img class='zoom-img' src='freebsd/rack_newreno_off_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data3_ertts_zoomed.png'><p>ertt</p></div>
  <div class='card'><img class='zoom-img' src='freebsd/rack_newreno_off_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data3_throughput_goodput_zoomed.png'><p>throughput_goodput</p></div>
</div>

<!-- <hr class="section-line">

<h2>rack_newreno_search</h2>
<div class='grid'>
  <div class='card'><img class='zoom-img' src='freebsd/rack_newreno_search_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data1_cwnd_rwind_cwndlimited_zoomed.png'><p>cwnd_rwind</p></div>
  <div class='card'><img class='zoom-img' src='freebsd/rack_newreno_search_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data1_ertts_zoomed.png'><p>ertt</p></div>
  <div class='card'><img class='zoom-img' src='freebsd/rack_newreno_search_param_sweep-abc200_send1048576_inc8192_max134217728_sock268435456/plots/log_data1_throughput_goodput_zoomed.png'><p>throughput_goodput</p></div>
</div>
 -->
<hr class="bold-line">

<h1>Linux</h1>

<p style="max-width:800px;margin:20px auto 30px auto;font-size:16px;line-height:1.6em;color:#333;text-align:left;">
  The following figures show <strong>Linux TCP performance</strong> under the same network conditions. HyStart and SEARCH are disabled.
</p>


<table>
<tr><th>Parameter</th><th>Default</th><th>Set Value</th></tr>
<tr><td>wmem</td><td>4096 87380 6291456</td><td class='changed'>4096 1048576 134217728</td></tr>
<tr><td>wmem</td><td>4096 16384 4194304</td><td class='changed'>4096 1048576 134217728</td></tr>
</table>

<h3>linux_both_off</h3>
<ul class="figure-desc">
  <li>This figure shows <strong>Linux TCP</strong> behavior with both HyStart and SEARCH disabled, under identical network conditions.</li>
  <li>The congestion window grows until <em>ssthresh</em> triggers, marking the transition to congestion avoidance.</li>
  <li>RTT rises as the queue fills, while throughput and Goodput stabilize after the slow-start phase.</li>
</ul>

<div class='grid'>
  <div class='card'><img class='zoom-img' src='Linux/linux_both_off_reported_to_lawrence/plots/log_data1_cwnd_zoomed.png'><p>cwnd_ssthresh</p></div>
  <div class='card'><img class='zoom-img' src='Linux/linux_both_off_reported_to_lawrence/plots/log_data1_rtt.png'><p>rtt</p></div>
  <div class='card'><img class='zoom-img' src='Linux/linux_both_off_reported_to_lawrence/plots/log_data1_throughput_goodput.png'><p>throughput_goodput</p></div>
</div>

<hr class="bold-line">

<h1>FreeBSD_SEARCH (cwnd rollback by initial RTT)</h1>
<table>
<tr><th>Parameter</th><th>Default</th><th>Set Value</th></tr>
<tr><td>abc_l_var</td><td>2</td><td class='changed'>200</td></tr>
<tr><td>sendspace</td><td>32768</td><td class='changed'>1048576</td></tr>
<tr><td>sendbuf_inc</td><td>8192</td><td>8192</td></tr>
<tr><td>sendbuf_max</td><td>2097152</td><td class='changed'>134217728</td></tr>
<tr><td>maxsockbuf</td><td>2097152</td><td class='changed'>268435456</td></tr>
</table>

<div class='grid'>
  <div class='card'><img class='zoom-img' src='search_freebsd/rollback_init_rtt/log_data3_cwnd.png'><p>cwnd and ssthresh</p></div>
  <div class='card'><img class='zoom-img' src='search_freebsd/rollback_init_rtt/log_data3_cwnd_rwind_cwndlimited_zoomed.png'><p>cwnd vs rwind</p></div>
  <div class='card'><img class='zoom-img' src='search_freebsd/rollback_init_rtt/log_data3_ertts_zoomed.png'><p>ERTT (ms)</p></div>
  <div class='card'><img class='zoom-img' src='search_freebsd/rollback_init_rtt/log_data3_curr_delv_prev_sent_vs_now_s_search.png'><p>Delivered vs Sent Window MB</p></div>
  <div class='card'><img class='zoom-img' src='search_freebsd/rollback_init_rtt/log_data3_norm_vs_now_s_search.png'><p>Normalized diff</p></div>
  <div class='card'><img class='zoom-img' src='search_freebsd/rollback_init_rtt/log_data3_throughput_goodput_zoomed.png'><p>Throughput and Goodput</p></div>
</div>

<hr class="bold-line">

<h1>FreeBSD_SEARCH (cannot exit)</h1>

<table>
<tr><th>Parameter</th><th>Default</th><th>Set Value</th></tr>
<tr><td>abc_l_var</td><td>2</td><td class='changed'>200</td></tr>
<tr><td>sendspace</td><td>32768</td><td class='changed'>1048576</td></tr>
<tr><td>sendbuf_inc</td><td>8192</td><td>8192</td></tr>
<tr><td>sendbuf_max</td><td>2097152</td><td class='changed'>134217728</td></tr>
<tr><td>maxsockbuf</td><td>2097152</td><td class='changed'>268435456</td></tr>
</table>

<ul class="figure-desc">
  <li><em>cwnd–ssthresh</em> clearly shows the flow <strong>exited slow start</strong> (ssthresh set).</li>
  <li>However, this exit was <strong>not triggered by the SEARCH logic</strong>.</li>
  <li>From logs: <strong>no ECN marks, no RTO, no packet loss</strong> were observed at the transition point.</li>
  <li>Therefore, the slow-start exit was caused by <strong>another mechanism</strong> (non-loss, non-ECN). I am inspecting the code to pinpoint the exact trigger.</li>
</ul>

<div class='grid'>
  <div class='card'><img class='zoom-img' src='search_freebsd/doesnot_exit/log_data4_cwnd.png'><p>cwnd and ssthresh</p></div>
  <div class='card'><img class='zoom-img' src='search_freebsd/doesnot_exit/log_data4_cwnd_rwind_cwndlimited_zoomed.png'><p>cwnd vs rwind</p></div>
  <div class='card'><img class='zoom-img' src='search_freebsd/doesnot_exit/log_data4_ertts_zoomed.png'><p>ERTT (ms)</p></div>
  <div class='card'><img class='zoom-img' src='search_freebsd/doesnot_exit/log_data4_curr_delv_prev_sent_vs_now_s_search.png'><p>Delivered vs Sent Window MB</p></div>
  <div class='card'><img class='zoom-img' src='search_freebsd/doesnot_exit/log_data4_norm_vs_now_s_search.png'><p>Normalized DIff</p></div>
  <div class='card'><img class='zoom-img' src='search_freebsd/doesnot_exit/log_data4_throughput_goodput_zoomed.png'><p>Throughput and Goodput</p></div>
</div>


<!-- <hr class="section-line"> -->

<!-- <h3>linux_search</h3>
<div class='grid'>
  <div class='card'><img class='zoom-img' src='Linux/linux_search_reported_to_lawrence/plots/log_data1_cwnd_zoomed.png'><p>cwnd_ssthresh</p></div>
  <div class='card'><img class='zoom-img' src='Linux/linux_search_reported_to_lawrence/plots/log_data1_rtt.png'><p>rtt</p></div>
  <div class='card'><img class='zoom-img' src='Linux/linux_search_reported_to_lawrence/plots/log_data1_throughput_goodput.png'><p>throughput_goodput</p></div>
</div> -->

<div id="imgModal" class="modal">
  <span class="close" onclick="document.getElementById('imgModal').style.display='none'">&times;</span>
  <img class="modal-content" id="modalImg">
</div>

<script>
const modal = document.getElementById('imgModal');
const modalImg = document.getElementById('modalImg');
document.querySelectorAll('.zoom-img').forEach(img => {
  img.onclick = () => { modal.style.display = 'block'; modalImg.src = img.src; };
});
window.onclick = (event) => {
  if (event.target == modal) modal.style.display = 'none';
};
</script>

</body>
</html>
